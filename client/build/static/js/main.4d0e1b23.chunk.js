(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{39:function(e,a,t){e.exports=t(77)},44:function(e,a,t){},45:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),r=t(33),l=t.n(r),s=(t(44),t(16)),o=t(17),c=t(20),d=t(18),u=t(21);var m=function(){return i.a.createElement("div",null,"LoginPage")},p=t(22),h=t(34),f=t.n(h),v=t(35),g=t.n(v),b=t(19),y=t.n(b),k=t(24),E=t.n(k),w=t(25),N=t.n(w),C=t(15),S=t.n(C),T=(t(45),new(t(46))),F=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(d.a)(a).call(this,e))).state={},t.setInitialState=function(){t.setState({firstName:"",lastName:"",displayName:"",email:"",password:"",passConf:"",isFirstNameValid:!1,isLastNameValid:!1,isDisplayNameValid:!1,isEmailValid:!1,isPasswordValid:!1,isPassConfValid:!1,firstNameFeedback:null,lastNameFeedback:null,displayNameFeedback:null,emailFeedback:null,passwordFeedback:null,passConfFeedback:null})},t.handleChange=function(e){var a=e.target.name;t.setState(Object(p.a)({},a,e.target.value)),a=a.charAt(0).toUpperCase()+a.slice(1),t["validate"+a](e)},t.validateFields=function(){Object.keys(t.state).filter((function(e){return e.match(/^is.*Valid$/)})).forEach((function(e){var a=e.replace("is","").replace("Valid","");t["validate"+a]({target:document.getElementById(a.charAt(0).toLowerCase()+a.slice(1)),type:"submit"})}))},t.validateName=function(e){var a,n=e.target.value,i=O.name[0],r=!0;""===n?(i=O.name[1],r=!1):n.match(/^[A-Za-z]+$/)||(i=O.name[2],r=!1);var l=e.target.name;l=l.charAt(0).toUpperCase()+l.slice(1),t.setState((a={},Object(p.a)(a,e.target.name+"Feedback",i),Object(p.a)(a,"is"+l+"Valid",r),a))},t.validateFirstName=t.validateName,t.validateLastName=t.validateName,t.validateDisplayName=function(e){var a=e.target.value,n=O.displayName[0],i=!0;""===a&&"change"!==e.type?t.state.firstName&&t.state.lastName?t.setState({displayName:t.state.firstName+" "+t.state.lastName}):(n=O.displayName[1],i=!1):a.length<2?(n=O.displayName[2],i=!1):a.match(/^[A-Za-z]+[A-Za-z\d_ ]*[A-Za-z\d]$/)?T.isProfane(a)&&(n=O.displayName[4],i=!1):(n=O.displayName[3],i=!1),t.setState({displayNameFeedback:n,isDisplayNameValid:i})},t.validateEmail=function(e){var a=e.target.value,n=O.email[0],i=!0;""===a?(n=O.email[1],i=!1):a.match(/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||(n=O.email[2],i=!1),t.setState({emailFeedback:n,isEmailValid:i}),i&&t.props.isEmailAvailable(a,(function(){t.setState({emailFeedback:O.email[3],isEmailValid:!1})}))},t.validatePassword=function(e){var a=e.target.value,n=O.password[0],i=!0,r={lengthReq:!0,numReq:!0,charReq:!0};if(""===a)n=O.password[1],i=!1;else if(a.length<6&&(r.lengthReq=!1,i=!1),a.match(/\d/)||(r.numReq=!1,i=!1),a.match(/[a-z]/)&&a.match(/[A-Z]/)||(r.charReq=!1,i=!1),!i){var l=Object.keys(r).filter((function(e){return!r[e]})),s="";l.includes("lengthReq")&&(s+=O.password[2]+"|"),l.includes("charReq")&&(s+=O.password[3]+"|"),l.includes("numReq")&&(s+=O.password[4]+"|"),""!==l&&(n=t.getPasswordFeedback(s))}t.setState({passwordFeedback:n,isPasswordValid:i})},t.validatePassConf=function(e){var a=e.target.value,n=O.passConf[0],i=!0;""===a?(n=O.passConf[1],i=!1):t.state.isPasswordValid?a!==t.state.password&&(n=O.passConf[3],i=!1):(n=O.passConf[2],i=!1),t.setState({passConfFeedback:n,isPassConfValid:i})},t.handleSubmit=function(e){e.preventDefault(),t.validateFields(),t.props.handleSignup({firstName:t.state.firstName,lastName:t.state.lastName,displayName:t.state.displayName,email:t.state.email,password:t.state.password}),t.setInitialState()},t.getPasswordFeedback=function(e){return(e=e.split("|")).pop(),i.a.createElement("ul",null,e.map((function(e){return i.a.createElement("li",null,e)})))},t.ControlGroup=function(e){var a=e.id,n=e.labelText,r=e.type,l=void 0===r?"text":r;return i.a.createElement(S.a.Group,{controlId:a},i.a.createElement(S.a.Label,null,n),i.a.createElement(S.a.Control,{type:l,name:a,value:t.state[a],onChange:t.handleChange,onBlur:t["validate"+a.charAt(0).toUpperCase()+a.slice(1)],isValid:t.state[a+"Feedback"]&&t.state["is"+a.charAt(0).toUpperCase()+a.slice(1)+"Valid"],isInvalid:t.state[a+"Feedback"]&&!t.state["is"+a.charAt(0).toUpperCase()+a.slice(1)+"Valid"]}),i.a.createElement(S.a.Control.Feedback,{type:"invalid"},t.state[a+"Feedback"]))},t.setInitialState(),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement(f.a,{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement(E.a,null,i.a.createElement(E.a.Body,null,i.a.createElement(S.a,{autoComplete:"off",onSubmit:this.handleSubmit},i.a.createElement(g.a,null,i.a.createElement(y.a,null,i.a.createElement(this.ControlGroup,{id:"firstName",labelText:"First Name"})),i.a.createElement(y.a,null,i.a.createElement(this.ControlGroup,{id:"lastName",labelText:"Last Name"}))),i.a.createElement(this.ControlGroup,{id:"displayName",labelText:"Display Name"}),i.a.createElement(this.ControlGroup,{id:"email",labelText:"Email"}),i.a.createElement(this.ControlGroup,{id:"password",labelText:"Password",type:"password"}),i.a.createElement(this.ControlGroup,{id:"passConf",labelText:"Confirm Password",type:"password"}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse"}},i.a.createElement(N.a,{variant:"secondary"},"Cancel"),i.a.createElement(N.a,{variant:"outline-success",onClick:this.handleSubmit},"Submit"))))))}}]),a}(i.a.Component),O={name:["Looks good.","This field is required.","The name can only contain alphabetic characters."],displayName:["Looks good.","This field is required.","The name is too short","This name contains invalid characters.","This name contains inappropriate language."],email:["Looks good.","This field is required.","Please enter a valid email address.","This email has already been taken."],password:["Looks good.","This field is required.","Must contain a minimum of 6 characters","Must contain both uppercase and lowercase letters.","Must contain at least one number."],passConf:["Looks good.","This field is required.","The password is invalid","The confirmation does not match the entered password."]},j=F;var P=function(){return i.a.createElement("div",null,"HomePage")},V=t(36),x=t(11);function A(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var q={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:A,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=A();return e?JSON.parse(atob(e.split(".")[1])).user:null}},z="/api/users/";var I={isEmailAvailable:function(e,a){return fetch(z,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({email:e})}).then((function(e){return e.json()})).then((function(e){e&&a()}))},signup:function(e){return fetch(z+"signup",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var a=e.token;return q.setToken(a)}))},getUser:function(){return q.getUserFromToken()},logout:function(){q.removeToken()},login:function(e){return fetch(z+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var a=e.token;return q.setToken(a)}))}},L=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=Object(c.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(i)))).state={user:null},t.handleLogin=function(){t.setState({user:I.getUser()})},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(V.a,null,i.a.createElement("div",{style:{backgroundColor:"#18121E",height:"100vh"}},i.a.createElement(x.d,null,i.a.createElement(x.b,{exact:!0,path:"/",render:function(a){return e.state.user?i.a.createElement(P,null):i.a.createElement(x.a,{to:"/signup"})}}),i.a.createElement(x.b,{exact:!0,path:"/signup",render:function(e){return i.a.createElement(j,{history:e.history,isEmailAvailable:I.isEmailAvailable,handleSignup:I.signup})}}),i.a.createElement(x.b,{exact:!0,path:"/login",render:function(e){return i.a.createElement(m,null)}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.4d0e1b23.chunk.js.map